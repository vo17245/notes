# 登入接口

## mapper

vo17245.reggie.mapper.EmployeeMapper

```java
package vo17245.reggie.mapper;

import com.baomidou.mybatisplus.core.mapper.BaseMapper;
import org.apache.ibatis.annotations.Mapper;
import vo17245.reggie.entity.Employee;

@Mapper
public interface EmployeeMapper extends BaseMapper<Employee> {
}


```
## service

vo17245.reggie.service.EmployeeService

```java
package vo17245.reggie.service;

import com.baomidou.mybatisplus.extension.service.IService;
import vo17245.reggie.entity.Employee;

public interface EmployeeService extends IService<Employee> {
}

```

vo17245.reggie.service.impl.EmployeeServiceImpl

```java
package vo17245.reggie.service.impl;

import com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;
import org.springframework.stereotype.Service;
import vo17245.reggie.entity.Employee;
import vo17245.reggie.mapper.EmployeeMapper;
import vo17245.reggie.service.EmployeeService;

@Service
public class EmployeeServiceImpl extends ServiceImpl<EmployeeMapper, Employee> implements EmployeeService {
}

```


## controller

接口路径
/employee/login

访问方法
post

前端输入
body中一个employee的json

返回
```java
Respone<Employee>
```

vo17245.reggie.controller.EmployeeController

```java
package vo17245.reggie.controller;

import com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;
import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.util.DigestUtils;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;
import vo17245.reggie.common.Respone;
import vo17245.reggie.entity.Employee;
import vo17245.reggie.mapper.EmployeeMapper;
import vo17245.reggie.service.EmployeeService;

import javax.servlet.http.HttpServletRequest;

@Slf4j
@RestController
@RequestMapping("/employee")
public class EmployeeController {
    @Autowired
    EmployeeService employeeService;
    @PostMapping("/login")
    public Respone<Employee> login(HttpServletRequest request, @RequestBody Employee employee){
        String password=employee.getPassword();
        password=DigestUtils.md5DigestAsHex(password.getBytes());
        //根据页面提交的employee.username查询employee
        LambdaQueryWrapper<Employee> queryWrapper = new LambdaQueryWrapper<>();
        queryWrapper.eq(Employee::getUsername,employee.getUsername());
        Employee employee1=employeeService.getOne(queryWrapper);
        if(employee1==null){
            //employee.username不存在
            return Respone.error("用户名或密码错误");
        }
        if(!employee1.getPassword().equals(password)){
            //employee.password错误
            return Respone.error("用户名或密码错误");
        }
        //将登入的employee的id保存到session
        request.getSession().setAttribute("employeeId",employee1.getId());
        return Respone.success(employee1);
    }
}

```





